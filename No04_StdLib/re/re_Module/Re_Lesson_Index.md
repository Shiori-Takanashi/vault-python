---
Title: reモジュールLesson
Created: 2025/07/24 23:21
Modified: 2025/07/24 23:21:24
Category: Tech
A: Language
B: Python
C: Standard-Library
D: re
Type: Lesson-Index
Order: 00
---


# 📢Python-Re-Lesson-Index

---

## 📍第01部：基本知識


---

### 📝第01章_`re` モジュールのインポートと概要

* Pythonに標準搭載されている文字列操作用ライブラリ
* `import re` により使用可能
* パターンマッチング、置換、分割などの高機能を提供



### 📝第02章_正規表現とは何か

* 正規表現（Regular Expression）は文字列のパターンを記述する言語
* UNIXやPerlの流れを汲む記法がPythonに組み込まれている
* 高速な文字列検出・抽出が可能



### 📝第03章_`re.search()` の使い方と挙動

* 最初に一致した部分だけを返す（先頭一致ではない）
* 戻り値は `Match` オブジェクト、`None` の可能性に注意
* 条件分岐による利用が主流



### 📝第04章_`re.match()` と `re.search()` の違い

* `match()` は文字列の先頭のみを対象にする
* `search()` は文字列全体に対して探索を行う
* 使い分けにより誤検出・漏れを防止可能



### 📝第05章_`re.fullmatch()` の用途と違い

* 文字列全体がパターンと一致する場合のみ成功
* 完全一致を要件とするバリデーション用途で有効
* `match()` と混同しないこと



### 📝第06章_`re.findall()` で全一致を取得

* 一致したすべての部分文字列をリストで返す
* 複数出現するパターンの収集に有用
* 空文字や部分一致に注意



### 📝第07章_`re.finditer()` でイテレータ取得

* 一致部分の `Match` オブジェクトを逐次返すイテレータ
* 一致位置のインデックスやグループ取得が可能
* 巨大データへの適用でメモリ効率に優れる



### 📝第08章_`re.sub()` による文字列の置換

* 一致部分を別の文字列に差し替える
* 第1引数にパターン、第2引数に置換文字列
* 正規表現を活用した高度なマスク処理などに使える



### 📝第09章_`re.split()` による文字列の分割

* 区切り文字として正規表現を使用可能
* 通常の `str.split()` より柔軟な分割が可能
* 空文字列や連続区切りの処理に注意



### 📝第10章_`re.compile()` によるパターンの事前コンパイル

* 正規表現パターンを事前にコンパイルして再利用可能にする
* パフォーマンス改善・可読性向上
* 複数の関数呼び出しで同一パターンを使う場合に推奨

---

## 📍第02部：基本メタ文字

---

### 📝第11章_`.`（任意の1文字）

* 改行 `\n` を除く任意の1文字にマッチ
* `re.DOTALL` を使えば改行にもマッチ可能
* 単純な文字検出に多用されるが、過剰一致に注意



### 📝第12章_`^`（行頭）と `$`（行末）

* `^` は文字列または行の先頭を示す
* `$` は文字列または行の末尾を示す
* `re.MULTILINE` と組み合わせることで行単位の一致が可能



### 📝第13章_`*`（0回以上の繰り返し）

* 指定文字列が0回以上繰り返される部分にマッチ
* 「貪欲」なマッチ（可能な限り長く一致）を行う
* `*?` で非貪欲モードに変更可能



### 📝第14章_`+`（1回以上の繰り返し）

* 少なくとも1回以上の繰り返しにマッチ
* `*` との違いは「最低1回必要」な点
* 繰り返し数が不定なパターンに適する



### 📝第15章_`?`（0回または1回）

* 出現してもしなくてもよい（オプション要素）
* `a?` は `a` があってもなくても一致する
* 非貪欲化の記号 `*?`, `+?`, `??` とは異なる用途に注意



### 📝第16章_`{m}`, `{m,n}` の繰り返し制御

* `{m}`：ちょうどm回、`{m,n}`：m回以上n回以下にマッチ
* 範囲を明示することで、マッチの精度を高める
* `+` や `*` の代替としても用いられる



### 📝第17章_`[]` 文字クラスと `[^]` 否定

* `[]`：指定文字集合のどれか1文字に一致
* `[^]`：指定文字以外の1文字に一致（否定）
* 範囲指定 `[a-zA-Z0-9]` や特定記号の列挙が可能



### 📝第18章_`|`（OR）とグルーピング `()`

* `|` は左右いずれかに一致すればマッチ（論理和）
* `()` はグループ化・キャプチャ目的で使用
* 条件分岐や抽出対象の限定に不可欠



### 📝第19章_エスケープ文字 `\` の役割

* 特殊文字を通常の文字として扱うために必要
* 例：`.` → `\.`、`*` → `\*` など
* Python文字列リテラルの `\\` による二重エスケープに注意



### 📝第20章_`re.escape()` による自動エスケープ

* 特殊文字をすべて自動的にエスケープする関数
* 動的に生成した文字列を安全に正規表現へ埋め込む場合に有効
* 手動での `\` 記述を回避し、可読性と安全性を両立

---

## 📍第03部：特殊なシーケンス

---

### 📝第21章_`\d`, `\D`（数字と非数字）

* `\d` は数字（0〜9）に一致、`\D` は数字以外に一致
* `[\d\D]` で「任意の文字」に近い表現も可能
* フォーム入力のバリデーションに頻出



### 📝第22章_`\w`, `\W`（単語構成文字と非単語）

* `\w` は英数字およびアンダースコアに一致（\[a-zA-Z0-9\_]）
* `\W` は上記以外に一致
* 変数名・識別子の抽出などに利用される



### 📝第23章_`\s`, `\S`（空白と非空白）

* `\s` は空白文字（空白・タブ・改行など）に一致
* `\S` は非空白に一致
* 文字列のトリミングや整形に用いられる



### 📝第24章_`\b`, `\B`（単語境界）

* `\b` は単語の境界（単語と非単語の間）に一致
* `\B` は単語境界以外の場所に一致
* 完全一致での検索やキーワード強調に便利



### 📝第25章_`\A`, `\Z`, `\z`（文字列先頭・末尾）

* `\A` は常に文字列の先頭、`\Z` は末尾または末尾の改行直前
* `\z` は末尾のみを厳密に指す（Pythonでは`\Z`と機能は同等）
* 行単位でなくファイル全体の一致を判定したい場面で使用



### 📝第26章_非キャプチャグループ `(?:...)`

* 通常の `()` はキャプチャ対象になるが、`(?:...)` はキャプチャしない
* グルーピングのみを目的としたパターンで使用
* `re.findall()` でのグループ数削減にも貢献



### 📝第27章_名前付きグループ `(?P<name>...)`

* キャプチャグループに名前を付けて管理可能
* `m.group('name')` でアクセスできるため読みやすくなる
* HTMLタグ・複雑な構文の抽出などで可読性向上



### 📝第28章_後方参照 `\1` や `(?P=name)`

* 直前のキャプチャと同一の文字列に一致
* `\1` は位置ベース、`(?P=name)` は名前ベース
* 開始タグと終了タグの整合性チェックなどに使われる



### 📝第29章_`(?=...)`, `(?!...)`  / 先読み・否定先読み

* `(?=...)`：肯定先読み。後にパターンが続くことを確認
* `(?!...)`：否定先読み。後にパターンが続かないことを確認
* マッチ対象には含めずに条件分岐を実現できる



### 📝第30章_`(?<=...)`, `(?<!...)` の後読み・否定後読み

* `(?<=...)`：肯定後読み。直前にパターンがあることを確認
* `(?<!...)`：否定後読み。直前にパターンがないことを確認
* 正規表現内で前後関係に制約を加えるために用いる

---

## 📍第04部：フラグと動作制御

---

### 📝第31章_`re.IGNORECASE`（大文字小文字無視）

* アルファベットの大文字小文字を区別せずにマッチ
* `re.I` でも同様の効果
* 英語圏の入力・URL・タグ名などに柔軟な一致を実現



### 📝第32章_`re.MULTILINE`（複数行モード）

* `^` および `$` が各行の先頭・末尾にマッチするようになる
* 通常は文字列全体の先頭・末尾のみ対象
* ログファイル解析や複数行メッセージ処理に有効



### 📝第33章_`re.DOTALL`（改行も `.` にマッチ）

* `.` が改行 `\n` を含めたすべての文字にマッチ
* 複数行にまたがる文書やHTMLタグ内の検出などに使用
* 非使用時は `.` は1行の中のみ対象



### 📝第34章_`re.VERBOSE`（読みやすい正規表現）

* 空白やコメントを含めた可読性の高いパターン定義が可能
* 複雑な正規表現の管理性を向上
* パターン中の空白は無視されるため注意



### 📝第35章_`re.ASCII`（ASCII限定動作）

* `\w`, `\d`, `\s` などの意味をASCIIに限定
* Unicode文字を除外した一致を行いたい場合に有効
* Python 3でUnicodeがデフォルトであることに注意



### 📝第36章_`re.UNICODE`（Unicodeモード）

* Python 3ではデフォルト動作
* Unicodeの定義に従って `\w`, `\d` などが拡張解釈される
* 特に明示する必要はないが、他のフラグとの整合性に注意



### 📝第37章_フラグの複数併用と `re.X | re.I`

* `re.compile()` に複数のフラグをビット演算子 `|` で同時指定可能
* 例：`re.compile(pat, re.VERBOSE | re.IGNORECASE)`
* モジュール外でも柔軟な挙動制御が可能



### 📝第38章_パターン内でのフラグ指定 `(?iLmsux)`

* 正規表現のパターン中でフラグを切り替え可能
* 例：`(?i)abc` は `abc` を大文字小文字無視でマッチ
* スコープを狭めた一時的制御に向いている



### 📝第39章_(?-i) などによる一時的フラグ無効化

* パターン途中で一時的にフラグを無効化できる
* 例：`(?i)abc(?-i)DEF` → `abc` は無視、`DEF` は厳密マッチ
* フラグの部分的適用による柔軟なパターン設計



### 📝第40章_`re.DEBUG` での構文ツリー

* 正規表現の構文を内部的に解析・出力
* パターンが意図通りに構成されているかを確認できる
* デバッグ用途であり、実行時には標準出力に構造情報が表示される

---

## 📍第05部：文字クラス・文字セット

---

### 📝第41章_`\p{...}` Unicodeカテゴリの扱い

* `\p{...}` 構文は Python 標準 `re` では非対応（代替として `regex` モジュールが必要）
* `\p{Ll}`（小文字の文字）、`\p{Han}`（漢字）などカテゴリ指定が可能
* 多言語文字処理や国際化対応での活用価値が高い



### 📝第42章_日本語のひらがな・カタカナ・漢字マッチ

* `[ぁ-ん]`, `[ァ-ヴー]`, `[一-龯]` によって日本語文字を指定可能
* Unicode範囲に基づくため、誤検出や漏れに注意
* 日本語処理においては正規化とセットで考慮すべき



### 📝第43章_英数字の範囲指定 `[a-zA-Z0-9]`

* アルファベット大小・数字を網羅的にカバーする典型的文字セット
* `\w` に類似するが、ASCII限定にしたい場合に明示的に使われる
* パスワードやIDの構文定義に有効



### 📝第44章_記号や制御文字 `[!@#]` 等の扱い

* 特殊記号を明示的に含める文字クラス
* エスケープが不要な記号（`-`, `!`, `@`, `#` など）はそのまま使える
* 特定用途（パスワード強度チェックなど）での重要性が高い



### 📝第45章_Unicodeの `\uXXXX`, `\xXX`, `\N{name}` など

* 文字コードによる直接指定：`\u3042`（あ）、`\x41`（A）など
* `\N{FULLWIDTH LATIN CAPITAL LETTER A}` のように名前付き参照も可能
* 見た目に依存しない厳密な文字判定が可能



### 📝第46章_日本語を含むマルチバイト文字列の処理

* 日本語・中国語などはUTF-8で2〜4バイト
* 正規表現処理においては「1文字＝1バイト」とは限らない
* 一致条件を精密に設計する必要がある（例：絵文字との衝突）



### 📝第47章_絵文字や非BMP文字の扱い

* Unicodeサロゲートペア（U+10000以上）で表現される文字（例：絵文字）
* Python `re` は一部非対応、`regex` モジュールでの対応が安定
* データの正規化・絵文字除去に関連



### 📝第48章_ASCIIモードとの非互換性の把握

* `re.ASCII` フラグ指定時は `\w` や `\d` などがASCII文字に限定される
* デフォルトはUnicode互換だが、あえて制限したいケースも存在
* セキュリティ目的での制限設計に有効



### 📝第49章_組み込み関数での `isalpha()` との違い

* `isalpha()` は全角・漢字も含む一方、`[a-zA-Z]` は英字限定
* Python組み込み関数と正規表現で定義が異なる点に注意
* 文字種の厳密な定義が必要な場面では両者を使い分けるべき



### 📝第50章_全角半角の判定と扱い

* `[Ａ-Ｚａ-ｚ０-９]`：全角英数字、`[A-Z0-9]`：半角英数字
* 正規化（NFKCなど）で事前に統一してから処理するのが基本
* Web入力・OCR・ログ解析などで実務上の差異が発生しやすい

---

## 📍第06部：Unicodeの原理

---

### 📄第51章 - Unicodeとは何か

* Unicodeの理念: 世界中の文字を統一する仕組み。
* Unicodeの歴史: なぜUnicodeが必要とされ、どのように発展したのか。
* Unicodeの必要性: 文字コードの標準化における課題と解決策。

### 📄第52章 - コードポイント・エンコーディング・BOM

* コードポイント: 文字を一意に識別する番号の概念。
* エンコーディング: コードポイントから実際のデータへの変換方法。
* BOM: バイト順序マーク（BOM）とその役割。

### 📄第53章 - UTF-8

* UTF-8の特徴: 可変長エンコーディングとしての利点。
* UTF-8の普及: Webやシステムで標準として採用されている理由。
* UTF-8のメリット: 多言語対応と互換性を提供する利点。

### 📄第54章 - UTF-16・サロゲートペア

* UTF-16: 固定長エンコーディングとしての特徴。
* サロゲートペア: 絵文字などを表現するために使用される特殊な手法。
* UTF-16の利用: WindowsやJavaにおける標準的な利用方法。

### 📄第55章 - ASCII

* ASCIIの設計: 初期の文字コードであり、Unicode設計に重要な役割を果たした。
* ASCIIとUnicode: ASCIIコードの範囲とUnicodeでの拡張。
* 互換性: ASCIIが現在も多くのシステムで利用されている理由。

### 📄第56章 - 正規化

* 正規化とは: 見た目が同じでも異なるデータを統一する技術。
* 例: 「が」と「が」など、異なる表現を統一する方法。
* 必要性: 文字列処理における一貫性を保つために重要な技術。

### 📄第57章 - 文字プロパティ・カテゴリ

* 文字プロパティ: 文字の性質（例：ひらがな、句読点）を扱う方法。
* 正規表現: Unicodeプロパティを利用した強力な文字列検索。
* Unicodeカテゴリ: 文字の分類とその利用方法。

### 📄第58章 - Unicodeアルゴリズム

* 辞書順ソート（Collation）: 多言語対応の並べ替えアルゴリズム。
* BiDiアルゴリズム: アラビア語など右から左に表示される言語のサポート。
* Unicodeアルゴリズムの実際: システムでの実装方法と注意点。

### 📄第59章 - Unicode・セキュリティ

* ホモグラフ攻撃: 類似文字を用いて偽サイトに誘導する手法。
* セキュリティリスク: Unicodeに関連するセキュリティ上の問題点。
* 対策方法: セキュリティリスクを回避するための技術と注意点。

### 📄第60章 - Unicodeコンソーシアム

* Unicodeコンソーシアムの役割: 新しい文字（絵文字など）の決定を行う団体。
* 文字追加のプロセス: 新しい文字をUnicodeに組み込むための手順。
* 舞台裏: Unicodeにおける文字追加の背景と議論。

---

## 📍第07部：レガシー・プログラム・DB・WEB

---

### 📄第61章 - レガシーエンコーディング

* 文字化けの原因: エンコーディングの不一致による問題。
* Unicode以前のコード体系: 古い文字コードシステムとその特徴。
* レガシーコードとの互換性: 現在のUnicodeシステムとの整合性を取る方法。

### 📄第62章 - 欧米のレガシーエンコーディング

* ASCIIの歴史: ラテン文字圏で使われた初期の文字コード。
* ISO-8859の系統: ラテン文字圏で広く使用されたエンコーディング。
* Windows-1252の影響: 欧米のWebページやファイルで一般的な文字コード。

### 📄第63章 - アジアのレガシーエンコーディング

* EUC-JPとShift-JIS: 日本語を扱うための旧式エンコーディング。
* EUC-KR: 韓国語に使用されたコード体系。
* Big5とGB2312: 繁体字中国語と簡体字中国語の文字コード。

### 📄第64章 - 国際化・地域化

* 国際化の概念: 世界中のユーザーが使えるソフトウェアを開発する基本的な考え方。
* 地域化の役割: 各地域ごとにソフトウェアを適応させるプロセス。
* 実装方法: ソフトウェア開発における国際化と地域化の実際的なアプローチ。

### 📄第65章 - プログラミング言語・Unicode

* Unicodeとプログラミング言語: Python、Java、JavaScriptなどで文字列がどう扱われるか。
* 言語間の違い: 各プログラミング言語における文字列の取り扱いとその違い。
* 注意点: Unicodeを扱う際の注意点とベストプラクティス。

### 📄第66章 - データベース・Unicode

* データベースにおける文字コード設定: Collationの設定方法とその重要性。
* Unicodeでのデータベース設計: Unicodeを考慮したデータベース設計の方法。
* 問題と対策: データベース内でのUnicode利用における問題と解決方法。

### 📄第67章 - Web・Unicode

* CSSとUnicode: Web開発におけるCSSでのUnicodeの取り扱い方。
* URLエンコーディング: UnicodeをURLに適用するためのエンコーディング方法。
* Web開発者に必要な知識: HTMLのcharset設定やUnicodeを扱う際の重要ポイント。

### 📄第68章 - 正規表現・Unicode

* Unicodeの文字プロパティ: 正規表現におけるUnicodeプロパティの活用方法。
* 強力で正確な正規表現: Unicode文字に対応した正規表現の作成方法。
* 実際の利用例: Unicodeを使った正規表現の実際的な使用例。

### 📄第69章 - CJK統合漢字

* 統合の意図: 日中韓の似た漢字を同じコードポイントに割り当てる「統合」の意図。
* 功罪: 統合による利点と問題点。
* 実際の影響: CJK統合漢字がUnicodeに与えた影響とその課題。

### 📄第70章 - 絵文字

* 絵文字の歴史: 日本発祥の絵文字がUnicodeに採用され、世界で使われるまでの経緯。
* 技術的背景: Unicodeでの絵文字の技術的な実装方法。
* 絵文字の普及: 世界中で絵文字がどのように使われるようになったか。

---

## 📍第08部：Unicode・日本語

---

### 📄第71章 - 日本語エンコーディングの歴史

* JISコード: 日本で使用された初期の文字コード。
* Shift-JISとEUC-JP: 日本語を扱うための主要なエンコーディング。
* UTF-8への移行: 日本語エンコーディングの標準化とその影響。

### 📄第72章 - 漢字・ひらがな・カタカナの位置

* Unicodeでの位置付け: 各文字がUnicodeにどのように配置されているか。
* 漢字の範囲: 常用漢字や人名用漢字がどのコードポイントにあるか。
* ひらがな・カタカナの位置: 日本語の音節文字がUnicodeにおいてどこに配置されているか。

### 📄第73章 - 全角と半角の位置

* 全角文字の位置: 全角英数や記号のUnicodeでの配置。
* 半角カナの扱い: 半角カタカナとそのUnicodeでの位置付け。
* 全角・半角の変換方法: 全角と半角の変換・統一技術。

### 📄第74章 - 日本語処理における正規化

* NFKCを使った全角・半角や互換文字の統一方法。
* 意図しない変換のリスク: 正規化による問題点とその回避方法。
* 正規化の便利さ: 実際の日本語処理で正規化をどのように利用するか。

### 📄第75章 - 常用漢字と人名用漢字

* 公的な文書で使われる漢字の範囲。
* 常用漢字と人名用漢字のUnicodeでの網羅状況。
* 漢字コードの更新: 常用漢字表の変更とそのUnicodeへの反映。

### 📄第76章 - 異体字とIVS

* 異体字セレクタ（IVS）の仕組み: 「渡邊」「渡邉」などの区別方法。
* Unicodeにおける異体字: 同じ漢字でも異なる書き方の扱い方。
* 異体字の活用: 名前や専門用語での異体字使用の実例。

### 📄第77章 - IME・Unicode

* IMEの役割: キー入力をUnicode文字に変換する仕組み。
* IMEとUnicodeの連携: 入力システムとUnicodeの相互作用。
* IMEの実装: 日本語IMEの技術的背景とその挙動。

### 📄第78章 - 日本語の書記順照合

* 日本語のソート順: 「は」「ば」「ぱ」をどう並べるか。
* Unicodeにおける書記順: 日本語特有の並べ替えルール。
* ソート順の実装: ソートアルゴリズムと日本語処理における注意点。

### 📄第79章 - 日本語テキスト処理

* Pythonでの日本語処理: ライブラリを使って学んだ知識を実装。
* 日本語テキストの正規化: 全角・半角や互換文字の変換方法。
* 実際のアプリケーション: 日本語処理を活かした実装例とその利点。

### 📄第80章 - Unicodeの発展

* 「令和」の合字(㍻)の追加: Unicodeの進化における日本の貢献。
* Unicodeの将来: 文字追加や新しい技術への対応。
* 日本の役割: Unicodeの発展における日本の影響と今後の展望。

---