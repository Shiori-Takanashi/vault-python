# PageとLocatorの違い

Playwrightにおける`Page`と`Locator`は、役割が明確に異なるオブジェクトです。
混同しやすいため、以下にそれぞれの目的と特徴を整理します。

---

## Page

`Page`は、ブラウザのタブまたはウィンドウに対応するオブジェクトであり、ページ全体に対する操作を司ります。主な役割は以下の通りです。

* URLへの遷移（`goto()`）
* スクリーンショットの取得（`screenshot()`）
* コンソールイベントの監視（`on("console", ...)`）
* JavaScriptの評価（`evaluate()`）
* HTML内の要素の取得（`locator()`）
* フォームの送信、ナビゲーションの待機などのページレベルの制御

ページ全体に対する責任を持ち、DOM内の要素へアクセスするための出発点としても使われます。


```python
page.goto("https://example.com")
```

---

## Locator

`Locator`は、`Page`上に存在する**1つまたは複数のDOM要素**を表現するオブジェクトです。取得後は、その要素に対してクリック、入力、取得などの操作が可能です。

* クリック（`click()`）
* テキスト入力（`fill()`、`type()`）
* テキスト取得（`inner_text()`、`text_content()`）
* 属性取得（`get_attribute()`）
* 存在確認、非表示待ち（`is_visible()`、`wait_for()`）

`Locator`は**要素取得の瞬間にDOMを固定しない**ため、ページの変化にも耐性があります。再評価される仕組みにより、動的ページでも安全な操作が可能です。


```python
locator = page.locator("button.submit")
locator.click()
```

---

## 両者の役割分担

| 観点      | Page                             | Locator                                   |
| ------- | -------------------------------- | ----------------------------------------- |
| 操作対象    | ページ全体                            | 特定のDOM要素                                  |
| 概念的対応   | ブラウザのタブ・ウィンドウ                    | DOMセレクタ                                   |
| 主なメソッド群 | `goto()`, `screenshot()`, `on()` | `click()`, `fill()`, `get_attribute()` など |
| 使用タイミング | ページを開く、遷移する、全体操作                 | 要素に何かする、状態を確認する                           |
| 取得方法    | Playwright APIから直接               | `page.locator("selector")`                |

---

## 結論

* **`Page`は「場所」であり、「入口」**
* **`Locator`は「その中の対象物」であり、「操作対象」**

このように理解すると、それぞれの責務が明確に分かれます。実際の自動操作では`Page`でページを開き、`Locator`で要素を操作するのが基本構成です。構造を把握せずに書き始めると、特に`page.query_selector()`と`locator()`の使い分けで混乱を招くため、まずこの役割分担を明確に意識すべきです。
