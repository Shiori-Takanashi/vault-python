「除外を正規表現で行う」とは、**あるパターンに一致「しない」文字列だけを対象としたい**という意味になります。このような **否定条件** を正規表現で実現するには、**否定の先読み（negative lookahead）** を使います。

---

## 📍01章：正規表現における「除外」の考え方

---

### 🧠 否定先読み `(?!)` を使う

* `(?!)` は「この先に **指定されたパターンが** 続かない場合にマッチする」という意味。
* つまり、**あるパターンを含まない文字列だけをマッチさせる**。

---

### ✅ 基本構文

```regex
^(?!.*<除外したいパターン>).*
```

---

## 📍02章：使用例で理解する

---

### 🎯 例1：`foo` を含まない行を抽出したい

```regex
^(?!.*foo).*
```

#### 説明：

| 部分          | 意味                 |
| ----------- | ------------------ |
| `^`         | 行頭                 |
| `(?!.*foo)` | 「`foo` を含まない」否定先読み |
| `.*`        | 任意の文字列（全体）         |

#### マッチ例：

```
barbaz       ✅
hello world  ✅
foo123       ❌
```

---

### 🎯 例2：`.txt` 以外の拡張子を持つファイルだけマッチさせる

```regex
^(?!.*\.txt$).*
```

#### マッチ例：

```
index.html    ✅
style.css     ✅
data.txt      ❌
```

---

### 🎯 例3：`test_` で始まらない Python ファイルを抽出

```regex
^(?!test_).*\.py$
```

---

## 📍03章：注意点と制限

---

### ⚠️ 注意

| 問題                            | 内容                                               |
| ----------------------------- | ------------------------------------------------ |
| 読みにくくなる                       | 否定先読みは直感的に分かりにくく、バグを生みやすい                        |
| 全体にマッチする                      | 否定先読みだけでは**一致しない対象を除外して**全体を取る構造になりやすい           |
| `re.match()` vs `re.search()` | Python などでは、行頭に `^` を置くことで `match()` に適合させる必要がある |

---

## 📍04章：Pythonで使う例

---

```python
import re

lines = ["foo123", "bar456", "hello world"]
pattern = re.compile(r"^(?!.*foo).*")

for line in lines:
    if pattern.match(line):
        print(line)
```

### 出力：

```
bar456
hello world
```

---

## ✅ まとめ

| 目的              | 構文                |
| --------------- | ----------------- |
| 特定の文字列を含まない行を抽出 | `^(?!.*NGワード).*`  |
| 特定の接頭辞を除外       | `^(?!prefix).*`   |
| 特定の拡張子を除外       | `^(?!.*\.txt$).*` |

---

必要であれば「複数パターンの除外」「除外しつつ別パターンを抽出」などの応用パターンも提示可能です。
