> # ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ï¼ˆiterableï¼‰ã¨ã¯

* **foræ–‡ã§ç¹°ã‚Šè¿”ã—å¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**
* å†…éƒ¨ã« `__iter__()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤
* `iter(obj)` ã§ **ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«å¤‰æ›ã§ãã‚‹**

```python
lst = [1, 2, 3]
it = iter(lst)  # ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã‹ã‚‰ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸
```

---

> ### ä¸»ãªã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã®ä¸€è¦§ï¼ˆçµ„ã¿è¾¼ã¿ï¼‰

| åž‹               | å†…å®¹             | å‚™è€ƒ                      |
| --------------- | -------------- | ----------------------- |
| `list`          | ãƒªã‚¹ãƒˆ            | `[1, 2, 3]`             |
| `tuple`         | ã‚¿ãƒ—ãƒ«            | `(1, 2, 3)`             |
| `str`           | æ–‡å­—åˆ—            | `"abc"` â†’ `'a','b','c'` |
| `dict`          | è¾žæ›¸ã®ã‚­ãƒ¼          | `{"a": 1}` â†’ `'a'`      |
| `set`           | ã‚»ãƒƒãƒˆï¼ˆé›†åˆï¼‰        | `{1, 2, 3}`             |
| `range`         | æ•´æ•°ã®é€£ç¶šå€¤         | `range(5)`              |
| `enumerate`     | æ·»å­—ä»˜ãã®ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ç”Ÿæˆå™¨  | `enumerate(["a", "b"])` |
| `zip`           | è¤‡æ•°ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã‚’ã¾ã¨ã‚ã‚‹   | `zip([1,2],[3,4])`      |
| `reversed`      | é€†é †ã®ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«       | `reversed([1,2,3])`     |
| `file`          | ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ     | `open("file.txt")`      |
| `map`, `filter` | é–¢æ•°çš„æ“ä½œã‚’è¡Œã†ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ | ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã‚‚ã‚ã‚‹              |

---

> ### ç‰¹æ®Šãªæ³¨æ„ç‚¹

* **`dict`**ï¼šç›´æŽ¥foræ–‡ã«æ¸¡ã™ã¨ã‚­ãƒ¼ãŒå¯¾è±¡
  â†’ `.items()` ã§ `(key, value)` ã«ã€`.values()` ã§å€¤ã®ã¿ã‚‚å¯
* **`set`**ï¼šé †åºãŒä¿è¨¼ã•ã‚Œãªã„
* **`range`**ï¼šå®Ÿä½“ã‚’ä¿æŒã›ãšã€é…å»¶è©•ä¾¡ã•ã‚Œã‚‹

---

> ### ã§ã¯ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆiteratorï¼‰ã¨ã¯

* **ç¹°ã‚Šè¿”ã—å‡¦ç†ã‚’1ã¤ãšã¤é€²ã‚ã‚‹ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**
* `__iter__()` ã«åŠ ãˆ `__next__()` ã‚’æŒã¤
* `next()` ã§æ¬¡ã®è¦ç´ ã‚’å–å¾—ã€çµ‚ã‚ã‚Œã° `StopIteration` ã‚’ç™ºç”Ÿ

```python
it = iter([1, 2])
next(it)  # 1
next(it)  # 2
next(it)  # StopIteration
```

---

> ### é•ã„ã®ä¸€è¦§

| ç‰¹å¾´           | ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«             | ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼        |
| ------------ | ----------------- | ------------- |
| `__iter__()` | â—‹ï¼ˆå¿…é ˆï¼‰             | â—‹ï¼ˆå¿…é ˆã€è‡ªåˆ†è‡ªèº«ã‚’è¿”ã™ï¼‰ |
| `__next__()` | Ã—                 | â—‹ï¼ˆå¿…é ˆï¼‰         |
| `next()` ä½¿ç”¨  | Ã—ï¼ˆè¦ `iter()` ãŒå¿…è¦ï¼‰ | â—‹ï¼ˆãã®ã¾ã¾å¯èƒ½ï¼‰     |
| `for` ãƒ«ãƒ¼ãƒ—ä½¿ç”¨å¯ | â—‹                 | â—‹             |
| çŠ¶æ…‹ä¿æŒ         | Ã—ï¼ˆæ¯Žå›žåˆæœŸåŒ–ï¼‰          | â—‹ï¼ˆé€²è¡ŒçŠ¶æ…‹ã‚’ä¿æŒï¼‰    |

---

> ## ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã‚’ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«å¤‰æ›ã—ã¦ä½¿ã†ä¾‹

---

> ### åŸºæœ¬ï¼š`iter()` ã§æ˜Žç¤ºçš„ã«å¤‰æ›

```python
data = [10, 20, 30]  # list ã¯ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«

it = iter(data)      # ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã«å¤‰æ›

print(next(it))  # 10
print(next(it))  # 20
print(next(it))  # 30
print(next(it))  # StopIteration ç™ºç”Ÿ
```



> ### `for` ã§ã®å‡¦ç†ã¨ç­‰ä¾¡ãªå‡¦ç†

```python
# é€šå¸¸ã® for æ–‡
for x in [10, 20, 30]:
    print(x)

# åŒç­‰ãªå‡¦ç†ï¼ˆå†…éƒ¨çš„ã«ã¯ã“ã‚ŒãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ï¼‰
it = iter([10, 20, 30])
while True:
    try:
        x = next(it)
        print(x)
    except StopIteration:
        break
```

---

> ### å¿œç”¨ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é€æ¬¡èª­ã¿å‡ºã—

```python
with open("example.txt", "r", encoding="utf-8") as f:
    it = iter(f)  # ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ã‚¤ãƒ†ãƒ©ãƒ–ãƒ« â†’ ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼åŒ–

    print(next(it).strip())  # 1è¡Œç›®
    print(next(it).strip())  # 2è¡Œç›®
```

ðŸ“Œ ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã™ã§ã«ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ãŒã€`iter(f)` ã«ã‚ˆã‚Šæ˜Žç¤ºçš„ã«å–å¾—å¯èƒ½ã€‚

---

> ### å¿œç”¨ï¼šæ¡ä»¶ä»˜ãã§é€”ä¸­ã¾ã§èª­ã‚€

```python
nums = [1, 2, 3, 4, 5]
it = iter(nums)

for val in it:
    if val > 3:
        break
    print(val)  # â†’ 1, 2, 3

# ç¶šãã®å€¤ã‚’å–å¾—å¯èƒ½ï¼ˆçŠ¶æ…‹ã¯ä¿æŒã•ã‚Œã¦ã„ã‚‹ï¼‰
print(next(it))  # 4
print(next(it))  # 5
```

ðŸ“Œ `iter()` ã«ã‚ˆã£ã¦å¾—ã‚‰ã‚Œã‚‹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯**çŠ¶æ…‹ã‚’ä¿æŒ**ã—ã¦ã„ã‚‹ãŸã‚ã€é€”ä¸­ä¸­æ–­ãƒ»å†é–‹ãŒå¯èƒ½ã€‚

---

> ### è£œè¶³ï¼š`iter(callable, sentinel)` ã®å½¢å¼

```python
import random

# 0 ãŒå‡ºã‚‹ã¾ã§ä¹±æ•°ã‚’ç”Ÿæˆï¼ˆçµ‚äº†æ¡ä»¶ã¤ãï¼‰
it = iter(lambda: random.randint(0, 5), 0)

for x in it:
    print(x)
```

ðŸ“Œ callable ã‚’ä½¿ã£ã¦ã€Œçµ‚äº†æ¡ä»¶ã¤ãã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€ã‚’ä½œã‚‹ç‰¹æ®Šç”¨æ³•ã€‚

---

> ### åˆ¤åˆ¥æ–¹æ³•

```python
from collections.abc import Iterable, Iterator

isinstance([1, 2, 3], Iterable)   # True
isinstance([1, 2, 3], Iterator)   # False
isinstance(iter([1, 2, 3]), Iterator)  # True
```

---



