---

# ✅ `append()` と `extend()` の違い（list）

---

## 🔹 共通点

| 項目  | 内容                    |
| --- | --------------------- |
| 対象  | `list` 型にのみ使用可能       |
| 目的  | 要素を追加する               |
| 操作  | **破壊的（in-place）操作**   |
| 戻り値 | `None`（リストそのものを書き換える） |

---

## 🔸 append(obj)

### 📌 概要

リストの末尾に、**そのままの形で1要素として**追加する。

### ✅ 使用例

```python
lst = [1, 2]
lst.append(3)        # → [1, 2, 3]
lst.append([4, 5])   # → [1, 2, 3, [4, 5]] ← ネストされる
```

### 📍 特徴

* **1つのオブジェクト**を**そのまま追加**
* 引数が `list` でも、**中身をばらさず1つの要素扱い**
* 多くの場合、**リストの要素数が +1** になる

### ⚠️ よくある誤解

```python
lst = [1, 2]
lst.append([3, 4])  # → [1, 2, [3, 4]]
# [1, 2, 3, 4] にはならない！
```

---

## 🔸 extend(iterable)

### 📌 概要

リストの末尾に、**イテラブルの要素をすべて展開して追加**する。

### ✅ 使用例

```python
lst = [1, 2]
lst.extend([3, 4])  # → [1, 2, 3, 4]
lst.extend('ab')    # → [1, 2, 3, 4, 'a', 'b']
```

### 📍 特徴

* 引数は **イテラブル（list, str, tuple など）**
* **中身を個別に展開して**追加
* `+=` に近い動作（`lst += [x, y]` ≒ `lst.extend([x, y])`）

### ⚠️ 注意

```python
lst = [1, 2]
lst.extend(3)  # TypeError: 'int' object is not iterable
```

---

## 🔸 動作の違い比較表

| 操作                      | 結果                 | 要素数 | 備考          |
| ----------------------- | ------------------ | --- | ----------- |
| `[1, 2].append(3)`      | `[1, 2, 3]`        | 3   | 単一要素の追加     |
| `[1, 2].append([3, 4])` | `[1, 2, [3, 4]]`   | 3   | リストがネストされる  |
| `[1, 2].extend([3, 4])` | `[1, 2, 3, 4]`     | 4   | 中身を展開して追加   |
| `[1, 2].extend('ab')`   | `[1, 2, 'a', 'b']` | 4   | 文字列は1文字ずつ展開 |

---

## 🔸 使用判断の原則

| 条件                               | 推奨メソッド     |
| -------------------------------- | ---------- |
| 単一の要素（int, str, list 1個など）を追加したい | `append()` |
| リストの中身をばらしてまとめて追加したい             | `extend()` |
| リストにリストを追加したいが、ネストしたい場合          | `append()` |
| リストにリストを追加したいが、要素展開したい場合         | `extend()` |

---

## 🔸 実務上の注意点

* `append()` の使いどころ：

  * キューやスタックに要素を追加
  * ログや履歴の末尾追加
* `extend()` の使いどころ：

  * データ結合、複数の結果をひとまとめに
  * 1回の操作で複数要素を追加（ループで `append` より効率的）

---

## 🔸 補足：+演算子との違い

| 操作            | 結果             | 破壊的か |
| ------------- | -------------- | ---- |
| `a + b`       | 新リストを生成        | ❌    |
| `a += b`      | `extend()` と同等 | ✅    |
| `a.append(b)` | bを1要素として追加     | ✅    |

---
