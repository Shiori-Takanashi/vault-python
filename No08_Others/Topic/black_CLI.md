## blackのCLI

---

### 📝 解説

**black** は Python コードを自動的に整形するフォーマッタです。
手動でインデントや改行をそろえる手間を省き、プロジェクト全体で統一されたコードスタイルを保証します。
特徴は「**設定不要で強制的に統一**」する点で、任意調整よりも可読性と一貫性を優先する設計になっています。

CLI（コマンドラインインターフェイス）から利用するのが一般的で、以下のような操作が可能です。

---

### 📝 基本的な利用方法

```bash
# ファイルを整形（内容を書き換え）
black sample.py

# ディレクトリ全体を再帰的に整形
black src/

# 整形結果のみを表示し、ファイルは書き換えない
black --diff sample.py

# 実際には変更せず、変更が必要かどうかをチェック
black --check sample.py
```

---

### 📝 よく使うオプション

* `--line-length <N>`
  デフォルト79文字の行幅を変更する。PEP8では79文字だが、プロジェクトに合わせて100や120にすることも多い。

  ```bash
  black --line-length 100 src/
  ```

* `--diff`
  実際には変更せず、差分を表示する。CIなどで差分確認に利用。

* `--check`
  実際に変更せず、整形が必要かどうかを判定する。
  CI で「整形されていなければ失敗」とする用途に便利。

* `--exclude <PATTERN>`
  整形対象外にするパスを正規表現で指定できる。

---

### 📝 開発フローへの組み込み

1. **ローカル利用**
   保存時に自動で `black` をかけるように VS Code の設定に組み込む。

   ```json
   "python.formatting.provider": "black",
   "editor.formatOnSave": true
   ```

2. **CI利用**
   GitHub Actionsなどで以下のように組み込み、スタイルの一貫性を担保する。

   ```yaml
   - name: Check code style
     run: black --check .
   ```

---

### 📝 まとめ

* **black** は「妥協なき自動整形」を標榜するフォーマッタ。
* CLIで `black <file or dir>` を実行するだけで統一スタイルを適用できる。
* 実案件では、VS Code 保存時フォーマットと CI での `--check` 併用が標準パターン。

---



