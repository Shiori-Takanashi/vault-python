
## ğŸ“01ç« ï¼šãƒ‘ã‚¹ãŒæ­£è¦ã§ã‚ã‚‹ã‹ï¼ˆæ­£è¦åŒ–ã®ç¢ºèªï¼‰

---

### ğŸ“è§£èª¬

**ãƒ‘ã‚¹ãŒæ­£è¦ã§ã‚ã‚‹ã‹**ã®ç¢ºèªã¨ã¯ã€ç›¸å¯¾ãƒ‘ã‚¹ã‚„è¨˜å·ï¼ˆ`..` ã‚„ `.`ï¼‰ã‚’å«ã‚“ã ãƒ‘ã‚¹ã‚’ã€**çµ¶å¯¾ãƒ‘ã‚¹ã«å¤‰æ›ã—ã€å†—é•·æ€§ã®ãªã„å½¢**ã«ã™ã‚‹å‡¦ç†ã§ã‚ã‚‹ã€‚
Python ã§ã¯ `pathlib.Path` ã‚’ä½¿ã„ã€`resolve()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®è§£æ±ºã‚„ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã®çµ±åˆã‚’è¡Œã£ãŸã€**æ­£è¦åŒ–ã•ã‚ŒãŸçµ¶å¯¾ãƒ‘ã‚¹**ã‚’å–å¾—ã§ãã‚‹ã€‚

æ³¨æ„ç‚¹ã¨ã—ã¦ã€å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ**å®Ÿåœ¨ã—ãªã„å ´åˆã«ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™ã‹ã©ã†ã‹**ã¯ã€`strict` å¼•æ•°ã®è¨­å®šã«ä¾å­˜ã™ã‚‹ï¼ˆ`strict=False` ã§ã‚ã‚Œã°å­˜åœ¨ç¢ºèªã›ãšã«æ­£è¦åŒ–ã™ã‚‹ï¼‰ã€‚

---

### âœ… ä½¿ç”¨ä¾‹ï¼ˆãƒ‘ã‚¹ã®æ­£è¦åŒ–ï¼‰

```python
from pathlib import Path

p = Path("./.././folder/../file.txt")
print(p.resolve(strict=False))  # â†’ /home/user/file.txtï¼ˆå­˜åœ¨ã—ãªãã¦ã‚‚OKï¼‰
```

---

### âš ï¸ æ³¨æ„ç‚¹

* `resolve(strict=True)` ã¯å¯¾è±¡ãŒå­˜åœ¨ã—ãªã„ã¨ `FileNotFoundError` ã‚’ç™ºç”Ÿã•ã›ã‚‹ã€‚
* `resolve()` ã¯ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹ãŸã‚ã€å®Ÿãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
* æ­£è¦åŒ–ãŒç›®çš„ã§ã‚ã‚Œã° `strict=False` ã‚’æ¨å¥¨ã€‚

---

## ğŸ“02ç« ï¼šãƒ‘ã‚¹ã«å¯¾è±¡ãŒå­˜åœ¨ã™ã‚‹ã‹ï¼ˆå­˜åœ¨ç¢ºèªï¼‰

---

### ğŸ“è§£èª¬

**æŒ‡å®šã•ã‚ŒãŸãƒ‘ã‚¹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹ã‹**ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€`pathlib.Path.exists()` ã‚’ç”¨ã„ã‚‹ã€‚
ã“ã‚Œã¯ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å«ã‚ãŸãƒ‘ã‚¹ãŒ**å®Ÿåœ¨ã™ã‚‹ã‹ã©ã†ã‹**ã‚’åˆ¤å®šã—ã€çµæœã‚’çœŸå½å€¤ã§è¿”ã™ã€‚

å­˜åœ¨ã™ã‚‹å¯¾è±¡ãŒãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã‹ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãªã®ã‹ã‚’åŒºåˆ¥ã—ãŸã„å ´åˆã¯ã€`is_file()` ã‚„ `is_dir()` ã‚’ä½¿ã†ã€‚

---

### âœ… ä½¿ç”¨ä¾‹ï¼ˆå­˜åœ¨ç¢ºèªï¼‰

```python
from pathlib import Path

p = Path("example.txt")

if p.exists():
    print("å­˜åœ¨ã—ã¾ã™")
else:
    print("å­˜åœ¨ã—ã¾ã›ã‚“")
```

---

### ğŸ” ã‚ˆã‚Šè©³ç´°ãªç¢ºèª

```python
if p.is_file():
    print("ã“ã‚Œã¯ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™")
elif p.is_dir():
    print("ã“ã‚Œã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™")
else:
    print("ã©ã¡ã‚‰ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ï¼ˆå­˜åœ¨ã—ãªã„å¯èƒ½æ€§ï¼‰")
```

---

### âš ï¸ æ³¨æ„ç‚¹

* `exists()` ã¯ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®å®Ÿä½“ãŒå­˜åœ¨ã—ãªã„å ´åˆã€`False` ã‚’è¿”ã™ã€‚
* éš ã—ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã®åˆ¶é™ã«ã¯æ³¨æ„ãŒå¿…è¦ã€‚
* äº‹å‰ã® `resolve()` ã¯å­˜åœ¨ç¢ºèªã«ã¯ä¸è¦ã§ã‚ã‚Šã€ã‚€ã—ã‚ä¾‹å¤–ã‚’å‡ºã™å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

---

### ğŸ§© è£œè¶³ï¼šæ­£è¦åŒ–ã¨å­˜åœ¨ç¢ºèªã®é †åº

æ­£è¦åŒ– â†’ å­˜åœ¨ç¢ºèªã¨ã„ã†é †ã«è¡Œã†å ´åˆã¯ã€**`resolve(strict=False)` â†’ `exists()`** ã®ã‚ˆã†ã«ä½¿ã†ã¨ã‚ˆã„ã€‚
ãŸã ã— `resolve()` ã¯ãƒ‡ã‚£ã‚¹ã‚¯I/OãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€**å‡¦ç†æ€§èƒ½ãŒé‡è¦ãªå ´é¢ã§ã¯æ…é‡ã«ä½¿ã†ã¹ã**ã§ã‚ã‚‹ã€‚ç”¨é€”ã«å¿œã˜ãŸé¸æŠãŒæœ›ã¾ã—ã„ã€‚

ä»¥ä¸‹ã«ã€`Path.resolve()` ã«ãŠã‘ã‚‹ **ã‚¨ãƒ©ãƒ¼ã‚­ãƒ£ãƒƒãƒã®æ–¹æ³•**ã‚’å«ã‚ãŸå®Ÿç”¨çš„ãªè§£èª¬ã‚’ã€ã„ã¤ã‚‚ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¿½è£œã—ã¾ã™ã€‚ç‰¹ã« `strict=True` ã®å ´åˆã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

---

## ğŸ“03ç« ï¼šresolve() ã«ã‚ˆã‚‹ä¾‹å¤–ã®ç™ºç”Ÿã¨å¯¾å‡¦

---

### ğŸ“è§£èª¬

`pathlib.Path.resolve(strict=True)` ã¯ã€**å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå®Ÿåœ¨ã—ãªã„å ´åˆã« `FileNotFoundError` ã‚’ç™ºç”Ÿã•ã›ã‚‹**ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ‘ã‚¹ã®æ­£è¦åŒ–ã¨åŒæ™‚ã«ã€å®Ÿåœ¨ç¢ºèªã‚’**ä¾‹å¤–ãƒ™ãƒ¼ã‚¹ã§å¼·åˆ¶çš„ã«è¡Œã„ãŸã„å ´é¢**ã§æœ‰åŠ¹ã§ã‚ã‚‹ã€‚

ä¸€æ–¹ã€å¯¾è±¡ã®å­˜åœ¨ã«é–¢ä¿‚ãªããƒ‘ã‚¹ã®ã¿æ­£è¦åŒ–ã—ãŸã„å ´åˆã¯ `strict=False`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã€‚

---

### âœ… åŸºæœ¬æ§‹æ–‡ï¼ˆtryâ€“exceptï¼‰

```python
from pathlib import Path

p = Path("not_exist.txt")

try:
    real_path = p.resolve(strict=True)
    print(f"æ­£è¦ãƒ‘ã‚¹: {real_path}")
except FileNotFoundError:
    print("å¯¾è±¡ãŒå­˜åœ¨ã—ã¾ã›ã‚“")
```

---

### ğŸ” ã‚¨ãƒ©ãƒ¼ã®å…·ä½“ä¾‹

```python
# å­˜åœ¨ã—ãªã„ãƒ‘ã‚¹ã« strict=True ã‚’æŒ‡å®šã™ã‚‹ã¨:
Path("unknown.txt").resolve(strict=True)
# â†’ FileNotFoundError: [Errno 2] No such file or directory: 'unknown.txt'
```

---

### ğŸ§ª è£œè¶³ï¼šä½¿ç”¨æ„å›³ã«ã‚ˆã‚‹é¸æŠ

| ç”¨é€”               | æ¨å¥¨è¨­å®š                 |
| ---------------- | -------------------- |
| å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã‚’å…¼ã­ãŸçµ¶å¯¾ãƒ‘ã‚¹å–å¾— | `strict=True`ï¼ˆä¾‹å¤–ã§å‡¦ç†ï¼‰ |
| å­˜åœ¨ä¸è¦ã®æ­£è¦åŒ–ï¼ˆæ§‹æ–‡ç›®çš„ã®ã¿ï¼‰ | `strict=False`ï¼ˆä¾‹å¤–å›é¿ï¼‰ |

---

### âš ï¸ æ³¨æ„ç‚¹

* `resolve(strict=True)` ã¯ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®ä¸æ•´åˆã§ã‚‚ `FileNotFoundError` ã‚’æŠ•ã’ã‚‹ã€‚
* å¯¾è±¡ãŒ**ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ‰ãƒ©ã‚¤ãƒ–ã‚„å¤–éƒ¨ãƒœãƒªãƒ¥ãƒ¼ãƒ **ã§ã‚ã‚Œã°ã€IOã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ãŸã‚ã€`OSError` å…¨ä½“ã‚’è£œè¶³ã™ã‚‹æ–¹ãŒå®‰å…¨ãªå ´åˆã‚‚ã‚ã‚‹ã€‚

```python
try:
    path.resolve(strict=True)
except (FileNotFoundError, OSError) as e:
    logging.warning(f"è§£æ±ºå¤±æ•—: {e}")
```

---

### âœ… çµ±åˆï¼šãƒ‘ã‚¹ãŒæ­£è¦ã‹ã¤å­˜åœ¨ã™ã‚‹ã‹ã‚’å®‰å…¨ã«ç¢ºèªã™ã‚‹é–¢æ•°

```python
def get_safe_path(p: Path) -> Path | None:
    try:
        return p.resolve(strict=True)
    except FileNotFoundError:
        logging.warning(f"{p} ã¯å­˜åœ¨ã—ã¾ã›ã‚“")
        return None
```

---
