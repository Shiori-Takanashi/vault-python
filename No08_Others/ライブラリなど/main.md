
# 🧷 `__main__` とは何か

> **`__main__` とは、Pythonがスクリプトを「直接実行したとき」に使う特別なモジュール名（文字列）である。**

Pythonは `.py` ファイルを実行するとき、そのスクリプトに対応する `__name__` 変数を `"__main__"` に設定する。

---

## 🔁 文脈によって変わる `__name__` の値

| 実行方法                  | `__name__` の値 |
| --------------------- | ------------- |
| `python my_script.py` | `"__main__"`  |
| `import my_script`    | `"my_script"` |

---

## 🔎 `if __name__ == "__main__"` の意味

```python
if __name__ == "__main__":
    main()
```

この構文は：

* **このファイルが直接実行されたときだけ `main()` を呼び出す**
* 他のファイルから `import` されたときには **実行しない**

---

## 🧱 実行とインポートの使い分け構造

```python
# module.py
def func():
    print("処理")

if __name__ == "__main__":
    print("デモ開始")
    func()
```

```bash
$ python module.py
# 出力：
デモ開始
処理
```

```python
# 他ファイルからのimport
import module
# → 何も出力されない（デモ部分は実行されない）
```

---

## 🧪 `__main__` はどこから来るのか？

* Pythonインタプリタは最初に読み込んだスクリプトに自動的に**モジュール名 `"__main__"` を割り当てる**
* それ以外のファイルはファイル名に応じた `__name__` を持つ

---

## 📦 `__main__.py` と `python -m` の関係

```bash
python -m mypackage
```

このとき、`mypackage/__main__.py` が実行され、**その内部では `__name__ == "__main__"`** となる。

---

## ✅ 結論

* `__main__` は、**Pythonで「実行開始点」を示す仕組み**として使われる特別なモジュール名
* `if __name__ == "__main__"` 構文で、**スクリプト単体実行とimport時の動作を分けられる**
* Pythonスクリプトの**実行エントリポイントの明示**に不可欠

---
