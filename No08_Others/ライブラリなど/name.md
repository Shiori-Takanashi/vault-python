
# 🔍 `__name__` とは何か

> `__name__` は、**Pythonがスクリプトを実行する際に自動的に定義する特殊な変数**。

この値によって、スクリプトが「**直接実行されたのか**」「**他からimportされたのか**」を判定できる。

---

## 🧪 実行時の `__name__` の値

| 実行の仕方                 | `__name__` の値 |
| --------------------- | ------------- |
| `python my_script.py` | `"__main__"`  |
| `import my_script`    | `"my_script"` |

---

## ✅ 実用パターン

### 典型構文（テスト・デモ・CLI用）

```python
# my_module.py

def add(x, y):
    return x + y

if __name__ == "__main__":
    # モジュールが直接実行されたときだけ以下を実行
    print(add(2, 3))
```

他モジュールから `import my_module` しても `print()` は実行されない。

---

## 🎯 目的・利点

| 目的           | 説明                                  |
| ------------ | ----------------------------------- |
| テストコードの分離    | 他のコードから `import` しても副作用を防げる         |
| モジュールの再利用性向上 | デモ用コードと本体コードを同一ファイルに共存できる           |
| CLI化         | スクリプト単体での動作が明確になる（`python -m` との併用） |

---

## ⚠ よくある誤解

| 誤解                            | 実際                              |
| ----------------------------- | ------------------------------- |
| `__name__` は関数？               | → **特殊変数**（自動的に定義される）           |
| `"__main__"` は予約語？            | → **文字列リテラル**（単なる `"__main__"`） |
| `__name__ == "__main__"` は必須？ | → **実行・importの分岐をしたい場合だけ必要**    |

---

## 🧱 応用：CLIスクリプト構造例

```python
# cli_main.py

def main():
    print("CLIとして実行されました")

if __name__ == "__main__":
    main()
```

これにより：

```bash
python cli_main.py     # 実行される
import cli_main        # 実行されない
```

---

## ✅ 結論

* `__name__` はスクリプトの**実行元を判別するための仕組み**
* `"__main__"` は「直接実行された場合」を示すマーカー
* モジュールの**安全な再利用やテスト用コードの分離**に不可欠

---
